# BaiduFM-Swift é¡¹ç›®å­¦ä¹ æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

BaiduFM-Swift æ˜¯ä¸€ä¸ªä½¿ç”¨ Swift è¯­è¨€å¼€å‘çš„ç™¾åº¦FMå®¢æˆ·ç«¯ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„iOSå¼€å‘æ¶æ„å’ŒæŠ€æœ¯æ ˆã€‚é¡¹ç›®æ”¯æŒiOSã€macOSã€tvOSå’ŒwatchOSå¤šå¹³å°ï¼Œä½¿ç”¨Swift Package Managerè¿›è¡Œä¾èµ–ç®¡ç†ã€‚

### ä¸»è¦åŠŸèƒ½ç‰¹æ€§
- ğŸµ åœ¨çº¿éŸ³ä¹æ’­æ”¾å’Œæµåª’ä½“
- ğŸ“± Apple Watchæ”¯æŒï¼ˆæ­Œè¯åŒæ­¥æ˜¾ç¤ºï¼‰
- ğŸ’¾ æ­Œæ›²æœ¬åœ°ä¸‹è½½å’Œç®¡ç†
- â¤ï¸ æ”¶è—éŸ³ä¹ç®¡ç†
- ğŸ“œ æ’­æ”¾å†å²è®°å½•
- ğŸ¤ æ­Œè¯è‡ªåŠ¨æ»šåŠ¨æ˜¾ç¤º
- ğŸ”„ ä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½
- ğŸ›ï¸ åå°æ’­æ”¾å’Œé”å±æ§åˆ¶
- ğŸ“‚ éŸ³ä¹åˆ†ç±»æµè§ˆ

## é¡¹ç›®æ¶æ„åˆ†æ

### 1. æ•´ä½“æ¶æ„æ¨¡å¼

é¡¹ç›®é‡‡ç”¨ **MVVM + å“åº”å¼ç¼–ç¨‹** æ¶æ„æ¨¡å¼ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      View       â”‚â—„â”€â”€â–ºâ”‚   ViewModel     â”‚â—„â”€â”€â–ºâ”‚     Model       â”‚
â”‚   (UI Layer)    â”‚    â”‚ (Logic Layer)   â”‚    â”‚  (Data Layer)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                       â–²                       â–²
         â”‚                       â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚RxCocoa  â”‚            â”‚RxSwift  â”‚            â”‚Network  â”‚
    â”‚Bindings â”‚            â”‚Reactive â”‚            â”‚Database â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ç›®å½•ç»“æ„è¯¦è§£

```
BaiduFM-Swift/
â”œâ”€â”€ Package.swift                 # Swift Package Manageré…ç½®
â”œâ”€â”€ Sources/
â”‚   â”œâ”€â”€ BaiduFM/                 # ä¸»è¦æºç ç›®å½•
â”‚   â”‚   â”œâ”€â”€ AppDelegate.swift    # åº”ç”¨ç¨‹åºå…¥å£å’Œé…ç½®
â”‚   â”‚   â”œâ”€â”€ Model/               # æ•°æ®æ¨¡å‹å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ DataCenter.swift      # æ•°æ®ä¸­å¿ƒï¼ˆå•ä¾‹ï¼Œå“åº”å¼æ•°æ®ç®¡ç†ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerViewModel.swift # æ’­æ”¾å™¨è§†å›¾æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ Song.swift            # æ­Œæ›²æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ Channel.swift         # é¢‘é“æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Views/               # è§†å›¾å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Modern/               # ç°ä»£åŒ–UIç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ BaseViewController.swift # åŸºç¡€è§†å›¾æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ViewController.swift          # ä¸»è§†å›¾æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ MusicListTableViewController.swift # éŸ³ä¹åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ChannelTableViewController.swift   # é¢‘é“åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ LikeTableViewController.swift      # æ”¶è—åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ RecentTableViewController.swift    # æœ€è¿‘æ’­æ”¾
â”‚   â”‚   â”‚   â””â”€â”€ DownloadTableViewController.swift  # ä¸‹è½½åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ Common/              # é€šç”¨å·¥å…·å’Œç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ Common.swift          # é€šç”¨å·¥å…·ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ NetworkManager.swift  # ç½‘ç»œè¯·æ±‚ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ AudioManager.swift    # éŸ³é¢‘æ’­æ”¾ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ DownloadManager.swift # ä¸‹è½½ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ LyricsManager.swift   # æ­Œè¯ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ HttpRequest.swift     # HTTPè¯·æ±‚å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ Utils.swift           # å®ç”¨å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ Const.swift           # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ DataBase/            # æ•°æ®åº“å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseManager.swift # æ•°æ®åº“ç®¡ç†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ SongList.swift        # æ­Œæ›²åˆ—è¡¨æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â””â”€â”€ Images.xcassets/     # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ Libs/                    # ç¬¬ä¸‰æ–¹åº“
â”‚       â””â”€â”€ fmdb/                # SQLiteæ•°æ®åº“å°è£…
â”œâ”€â”€ Tests/                       # æµ‹è¯•ä»£ç 
â””â”€â”€ ScreenShot/                  # é¡¹ç›®æˆªå›¾
```

### 3. æ ¸å¿ƒæŠ€æœ¯æ ˆ

#### ä¾èµ–åº“åˆ†æ
```swift
// ç½‘ç»œå±‚
- Alamofire: HTTPç½‘ç»œè¯·æ±‚åº“
- SwiftyJSON: JSONæ•°æ®è§£æ

// å“åº”å¼ç¼–ç¨‹
- RxSwift: å“åº”å¼ç¼–ç¨‹æ¡†æ¶
- RxCocoa: RxSwiftçš„UIKitæ‰©å±•

// UIå±‚
- SnapKit: AutoLayout DSL
- Kingfisher: å›¾ç‰‡ç¼“å­˜å’ŒåŠ è½½
- MJRefresh: ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶
- LTMorphingLabel: æ–‡å­—åŠ¨ç”»æ•ˆæœ

// æ•°æ®å±‚
- SQLite.swift: ç±»å‹å®‰å…¨çš„SQLite ORM
- FMDB: SQLiteæ•°æ®åº“å°è£…ï¼ˆCæ¡¥æ¥ï¼‰

// å·¥å…·åº“
- Async: å¼‚æ­¥ç¼–ç¨‹ç®€åŒ–
```

## æ ¸å¿ƒç»„ä»¶è¯¦è§£

### 1. DataCenterï¼ˆæ•°æ®ä¸­å¿ƒï¼‰

**èŒè´£**: å…¨å±€æ•°æ®çŠ¶æ€ç®¡ç†ï¼Œé‡‡ç”¨å•ä¾‹æ¨¡å¼ + å“åº”å¼ç¼–ç¨‹

```swift
// æ ¸å¿ƒå“åº”å¼å±æ€§
let channelListInfo = BehaviorRelay<[Channel]>(value: [])     // é¢‘é“åˆ—è¡¨
let currentChannel = BehaviorRelay<Channel?>(value: nil)      // å½“å‰é¢‘é“
let currentPlayingSong = BehaviorRelay<Song?>(value: nil)     // å½“å‰æ’­æ”¾æ­Œæ›²
let likedSongs = BehaviorRelay<[Song]>(value: [])            // æ”¶è—æ­Œæ›²
let recentSongs = BehaviorRelay<[Song]>(value: [])           // æœ€è¿‘æ’­æ”¾
let downloadedSongs = BehaviorRelay<[Song]>(value: [])       // å·²ä¸‹è½½æ­Œæ›²
```

**ç‰¹ç‚¹**:
- ä½¿ç”¨ `BehaviorRelay` å®ç°å“åº”å¼æ•°æ®ç»‘å®š
- è‡ªåŠ¨ä¿å­˜ç”¨æˆ·åå¥½è®¾ç½®åˆ° UserDefaults
- ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ä¸šåŠ¡æ•°æ®çŠ¶æ€

### 2. BaseViewControllerï¼ˆåŸºç¡€è§†å›¾æ§åˆ¶å™¨ï¼‰

**èŒè´£**: æä¾›ç»Ÿä¸€çš„UIçŠ¶æ€ç®¡ç†å’Œé€šç”¨åŠŸèƒ½

```swift
// UIçŠ¶æ€ç®¡ç†
enum ViewState {
    case loading    // åŠ è½½ä¸­
    case content    // æ˜¾ç¤ºå†…å®¹  
    case empty      // ç©ºçŠ¶æ€
    case error      // é”™è¯¯çŠ¶æ€
}
```

**åŠŸèƒ½**:
- ç»Ÿä¸€çš„åŠ è½½ã€é”™è¯¯ã€ç©ºçŠ¶æ€æ˜¾ç¤º
- å“åº”å¼UIçŠ¶æ€ç»‘å®š
- å¯¼èˆªæ æ ·å¼é…ç½®
- Toastæç¤ºåŠŸèƒ½

### 3. ç®¡ç†å™¨ç»„ä»¶

#### NetworkManagerï¼ˆç½‘ç»œç®¡ç†å™¨ï¼‰
- åŸºäº Alamofire å°è£…
- æä¾›å“åº”å¼ç½‘ç»œè¯·æ±‚æ¥å£
- ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œæ•°æ®è§£æ

#### AudioManagerï¼ˆéŸ³é¢‘ç®¡ç†å™¨ï¼‰
- éŸ³é¢‘æ’­æ”¾æ§åˆ¶
- åå°æ’­æ”¾æ”¯æŒ
- è¿œç¨‹æ§åˆ¶äº‹ä»¶å¤„ç†
- æ’­æ”¾çŠ¶æ€ç®¡ç†

#### DownloadManagerï¼ˆä¸‹è½½ç®¡ç†å™¨ï¼‰
- æ­Œæ›²ä¸‹è½½é˜Ÿåˆ—ç®¡ç†
- ä¸‹è½½è¿›åº¦è·Ÿè¸ª
- æœ¬åœ°æ–‡ä»¶ç®¡ç†

#### DatabaseManagerï¼ˆæ•°æ®åº“ç®¡ç†å™¨ï¼‰
- SQLiteæ•°æ®åº“åˆå§‹åŒ–
- æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†
- äº‹åŠ¡å¤„ç†

## å¦‚ä½•æ–°å»ºåŠŸèƒ½

### 1. åŠŸèƒ½å¼€å‘æµç¨‹

```mermaid
graph TD
    A[éœ€æ±‚åˆ†æ] --> B[è®¾è®¡æ•°æ®æ¨¡å‹]
    B --> C[åˆ›å»ºViewModel]
    C --> D[å®ç°UIç•Œé¢]
    D --> E[æ•°æ®ç»‘å®š]
    E --> F[ç½‘ç»œæ¥å£å¯¹æ¥]
    F --> G[æ•°æ®åº“æ“ä½œ]
    G --> H[æµ‹è¯•éªŒè¯]
```

### 2. å…·ä½“å¼€å‘æ­¥éª¤

#### æ­¥éª¤1: åˆ›å»ºæ•°æ®æ¨¡å‹
```swift
// åœ¨ Sources/BaiduFM/Model/ ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ•°æ®æ¨¡å‹
struct NewFeatureModel {
    let id: String
    let name: String
    let description: String
    // å…¶ä»–å±æ€§...
}
```

#### æ­¥éª¤2: æ‰©å±•DataCenter
```swift
// åœ¨ DataCenter.swift ä¸­æ·»åŠ æ–°åŠŸèƒ½çš„å“åº”å¼å±æ€§
class DataCenter {
    // æ–°åŠŸèƒ½æ•°æ®
    let newFeatureData = BehaviorRelay<[NewFeatureModel]>(value: [])
    
    // åŠ è½½æ–°åŠŸèƒ½æ•°æ®çš„æ–¹æ³•
    func loadNewFeatureData() -> Observable<Void> {
        return NetworkManager.shared.getNewFeatureData()
            .do(onNext: { [weak self] data in
                self?.newFeatureData.accept(data)
            })
            .map { _ in () }
    }
}
```

#### æ­¥éª¤3: åˆ›å»ºViewModel
```swift
// åœ¨ Sources/BaiduFM/Model/ ç›®å½•ä¸‹åˆ›å»ºViewModel
class NewFeatureViewModel {
    private let disposeBag = DisposeBag()
    private let dataCenter = DataCenter.shared
    
    // è¾“å…¥
    let refreshTrigger = PublishRelay<Void>()
    
    // è¾“å‡º
    let items: Driver<[NewFeatureModel]>
    let isLoading: Driver<Bool>
    let error: Driver<String?>
    
    init() {
        // å®ç°å“åº”å¼é€»è¾‘ç»‘å®š
        let loadingRelay = BehaviorRelay<Bool>(value: false)
        let errorRelay = BehaviorRelay<String?>(value: nil)
        
        // åˆ·æ–°è§¦å‘å™¨
        refreshTrigger
            .do(onNext: { _ in loadingRelay.accept(true) })
            .flatMapLatest { _ in
                dataCenter.loadNewFeatureData()
                    .catch { error in
                        errorRelay.accept(error.localizedDescription)
                        return .empty()
                    }
            }
            .do(onNext: { _ in loadingRelay.accept(false) })
            .subscribe()
            .disposed(by: disposeBag)
        
        // è¾“å‡ºç»‘å®š
        items = dataCenter.newFeatureData.asDriver()
        isLoading = loadingRelay.asDriver()
        error = errorRelay.asDriver()
    }
}
```

#### æ­¥éª¤4: åˆ›å»ºè§†å›¾æ§åˆ¶å™¨
```swift
// åœ¨ Sources/BaiduFM/Views/ ç›®å½•ä¸‹åˆ›å»ºæ–°çš„è§†å›¾æ§åˆ¶å™¨
class NewFeatureViewController: BaseViewController {
    
    // MARK: - å±æ€§
    private let viewModel = NewFeatureViewModel()
    
    // MARK: - UIç»„ä»¶
    private lazy var tableView: UITableView = {
        let tableView = UITableView()
        tableView.delegate = self
        tableView.dataSource = self
        tableView.register(UITableViewCell.self, forCellReuseIdentifier: "Cell")
        return tableView
    }()
    
    // MARK: - ç”Ÿå‘½å‘¨æœŸ
    override func viewDidLoad() {
        super.viewDidLoad()
        setupUI()
        setupBindings()
    }
    
    // MARK: - UIè®¾ç½®
    private func setupUI() {
        title = "æ–°åŠŸèƒ½"
        view.addSubview(tableView)
        
        tableView.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }
    }
    
    // MARK: - æ•°æ®ç»‘å®š
    private func setupBindings() {
        // è§†å›¾å‡ºç°æ—¶è§¦å‘æ•°æ®åŠ è½½
        rx.viewWillAppear
            .take(1)
            .bind(to: viewModel.refreshTrigger)
            .disposed(by: disposeBag)
        
        // ç»‘å®šæ•°æ®åˆ°UI
        viewModel.items
            .drive(onNext: { [weak self] _ in
                self?.tableView.reloadData()
                self?.showContent()
            })
            .disposed(by: disposeBag)
        
        // ç»‘å®šåŠ è½½çŠ¶æ€
        viewModel.isLoading
            .drive(onNext: { [weak self] isLoading in
                if isLoading {
                    self?.showLoading()
                }
            })
            .disposed(by: disposeBag)
        
        // ç»‘å®šé”™è¯¯çŠ¶æ€
        viewModel.error
            .compactMap { $0 }
            .drive(onNext: { [weak self] error in
                self?.showError(message: error)
            })
            .disposed(by: disposeBag)
    }
    
    // MARK: - é‡è¯•å¤„ç†
    override func onRetryTapped() {
        viewModel.refreshTrigger.accept(())
    }
}

// MARK: - TableViewæ•°æ®æºå’Œä»£ç†
extension NewFeatureViewController: UITableViewDataSource, UITableViewDelegate {
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return viewModel.items.value.count
    }
    
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        let cell = tableView.dequeueReusableCell(withIdentifier: "Cell", for: indexPath)
        let item = viewModel.items.value[indexPath.row]
        cell.textLabel?.text = item.name
        cell.detailTextLabel?.text = item.description
        return cell
    }
}
```

#### æ­¥éª¤5: ç½‘ç»œæ¥å£æ‰©å±•
```swift
// åœ¨ NetworkManager.swift ä¸­æ·»åŠ æ–°çš„ç½‘ç»œè¯·æ±‚æ–¹æ³•
extension NetworkManager {
    func getNewFeatureData() -> Observable<[NewFeatureModel]> {
        let url = "https://api.example.com/new-feature"
        
        return request(url: url, method: .get)
            .map { json in
                // è§£æJSONæ•°æ®
                return json["data"].arrayValue.compactMap { item in
                    NewFeatureModel(
                        id: item["id"].stringValue,
                        name: item["name"].stringValue,
                        description: item["description"].stringValue
                    )
                }
            }
    }
}
```

#### æ­¥éª¤6: æ•°æ®åº“æ“ä½œï¼ˆå¦‚éœ€è¦ï¼‰
```swift
// åœ¨ Sources/BaiduFM/DataBase/ ç›®å½•ä¸‹åˆ›å»ºæ•°æ®åº“æ“ä½œç±»
class NewFeatureDatabase {
    private let dbManager = DatabaseManager.shared
    
    func saveNewFeatureData(_ data: [NewFeatureModel]) {
        // å®ç°æ•°æ®åº“ä¿å­˜é€»è¾‘
    }
    
    func loadNewFeatureData() -> [NewFeatureModel] {
        // å®ç°æ•°æ®åº“è¯»å–é€»è¾‘
        return []
    }
}
```

### 3. å¼€å‘æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ
1. **å‘½åè§„èŒƒ**: ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œç±»åé¦–å­—æ¯å¤§å†™ï¼Œå˜é‡å’Œæ–¹æ³•é¦–å­—æ¯å°å†™
2. **æ³¨é‡Šè§„èŒƒ**: ä½¿ç”¨ä¸­æ–‡æ³¨é‡Šï¼Œè¯´æ˜ç±»ã€æ–¹æ³•çš„åŠŸèƒ½å’Œç”¨é€”
3. **æ–‡ä»¶ç»„ç»‡**: æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡æ–‡ä»¶ï¼Œä¿æŒç›®å½•ç»“æ„æ¸…æ™°

#### å“åº”å¼ç¼–ç¨‹è§„èŒƒ
1. **ä½¿ç”¨ BehaviorRelay**: ç”¨äºçŠ¶æ€ç®¡ç†å’Œæ•°æ®ç»‘å®š
2. **ä½¿ç”¨ Driver**: ç”¨äºUIç»‘å®šï¼Œç¡®ä¿åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ
3. **æ­£ç¡®ä½¿ç”¨ DisposeBag**: é¿å…å†…å­˜æ³„æ¼

#### UIå¼€å‘è§„èŒƒ
1. **ç»§æ‰¿ BaseViewController**: è·å¾—ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†åŠŸèƒ½
2. **ä½¿ç”¨ SnapKit**: è¿›è¡ŒAutoLayoutçº¦æŸè®¾ç½®
3. **å“åº”å¼UIç»‘å®š**: ä½¿ç”¨RxCocoaè¿›è¡ŒUIæ•°æ®ç»‘å®š

#### é”™è¯¯å¤„ç†
1. **ç»Ÿä¸€é”™è¯¯å¤„ç†**: åœ¨ViewModelå±‚å¤„ç†ä¸šåŠ¡é”™è¯¯
2. **ç”¨æˆ·å‹å¥½æç¤º**: ä½¿ç”¨BaseViewControllerçš„é”™è¯¯æ˜¾ç¤ºåŠŸèƒ½
3. **é‡è¯•æœºåˆ¶**: å®ç°ç½‘ç»œè¯·æ±‚å¤±è´¥çš„é‡è¯•åŠŸèƒ½

### 4. æµ‹è¯•æŒ‡å—

#### å•å…ƒæµ‹è¯•
```swift
// åœ¨ Tests/BaiduFMTests/ ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•æ–‡ä»¶
import XCTest
import RxTest
import RxSwift
@testable import BaiduFM

class NewFeatureViewModelTests: XCTestCase {
    var viewModel: NewFeatureViewModel!
    var scheduler: TestScheduler!
    var disposeBag: DisposeBag!
    
    override func setUp() {
        super.setUp()
        scheduler = TestScheduler(initialClock: 0)
        disposeBag = DisposeBag()
        viewModel = NewFeatureViewModel()
    }
    
    func testLoadData() {
        // å®ç°æµ‹è¯•é€»è¾‘
    }
}
```

## é¡¹ç›®è¿è¡Œå’Œè°ƒè¯•

### 1. ç¯å¢ƒè¦æ±‚
- Xcode 14.0+
- iOS 13.0+
- Swift 5.7+

### 2. è¿è¡Œæ­¥éª¤
```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/belm/BaiduFM-Swift.git

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd BaiduFM-Swift

# 3. ä½¿ç”¨Xcodeæ‰“å¼€é¡¹ç›®
open Package.swift

# 4. ç­‰å¾…ä¾èµ–ä¸‹è½½å®Œæˆåè¿è¡Œé¡¹ç›®
```

### 3. è°ƒè¯•æŠ€å·§
1. **ä½¿ç”¨æ–­ç‚¹**: åœ¨å…³é”®ä»£ç å¤„è®¾ç½®æ–­ç‚¹è¿›è¡Œè°ƒè¯•
2. **æ—¥å¿—è¾“å‡º**: ä½¿ç”¨ `print()` è¾“å‡ºè°ƒè¯•ä¿¡æ¯
3. **å“åº”å¼è°ƒè¯•**: ä½¿ç”¨ `.debug()` æ“ä½œç¬¦è°ƒè¯•RxSwiftæµ
4. **ç½‘ç»œè°ƒè¯•**: ä½¿ç”¨Charlesæˆ–ProxymanæŠ“åŒ…è°ƒè¯•ç½‘ç»œè¯·æ±‚

## æ€»ç»“

BaiduFM-Swifté¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„iOSå¼€å‘æ¶æ„ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

### ä¼˜åŠ¿
- âœ… **æ¶æ„æ¸…æ™°**: MVVM + å“åº”å¼ç¼–ç¨‹ï¼ŒèŒè´£åˆ†ç¦»æ˜ç¡®
- âœ… **æŠ€æœ¯å…ˆè¿›**: ä½¿ç”¨æœ€æ–°çš„Swiftç‰¹æ€§å’Œç¬¬ä¸‰æ–¹åº“
- âœ… **å¯ç»´æŠ¤æ€§å¼º**: ç»Ÿä¸€çš„ä»£ç è§„èŒƒå’Œç»„ä»¶åŒ–è®¾è®¡
- âœ… **æ‰©å±•æ€§å¥½**: åŸºäºåè®®å’Œæ³›å‹çš„è®¾è®¡ï¼Œæ˜“äºæ‰©å±•æ–°åŠŸèƒ½

### å­¦ä¹ ä»·å€¼
- ğŸ“š **å“åº”å¼ç¼–ç¨‹**: å­¦ä¹ RxSwiftåœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨
- ğŸ“š **æ¶æ„è®¾è®¡**: ç†è§£MVVMæ¶æ„åœ¨iOSå¼€å‘ä¸­çš„å®è·µ
- ğŸ“š **ç»„ä»¶åŒ–å¼€å‘**: å­¦ä¹ å¦‚ä½•è®¾è®¡å¯å¤ç”¨çš„UIç»„ä»¶
- ğŸ“š **æ•°æ®ç®¡ç†**: æŒæ¡æœ¬åœ°æ•°æ®åº“å’Œç½‘ç»œæ•°æ®çš„ç»Ÿä¸€ç®¡ç†

é€šè¿‡å­¦ä¹ è¿™ä¸ªé¡¹ç›®ï¼Œå¯ä»¥æŒæ¡ç°ä»£iOSå¼€å‘çš„æ ¸å¿ƒæŠ€æœ¯å’Œæœ€ä½³å®è·µï¼Œä¸ºå¼€å‘é«˜è´¨é‡çš„iOSåº”ç”¨æ‰“ä¸‹åšå®åŸºç¡€ã€‚ 